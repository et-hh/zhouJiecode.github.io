(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{218:function(t,s,a){"use strict";a.r(s);var r=a(0),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"使用gulp，webpack等前端构建工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用gulp，webpack等前端构建工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用gulp，webpack等前端构建工具")]),t._v(" "),a("p",[t._v("这种方式网上例子很多，可以自己查阅")]),t._v(" "),a("h3",{attrs:{id:"利用框架本身的资源加载器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#利用框架本身的资源加载器","aria-hidden":"true"}},[t._v("#")]),t._v(" 利用框架本身的资源加载器")]),t._v(" "),a("p",[t._v("举个栗子：requireJS\nrequireJS有个配置参数：urlArgs，在源码中有这么一段：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlArgs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexOf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'?'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'&'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("\n          config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlArgs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("源码中只有这里用到了urlArgs；\n从代码分析来看，其实就是通过js创造了一个script标签然后设置url为以上返回值，而上面url后面加上了一个版本号参数：urlArgs，从而给要加载的js加上了版本号。")]),t._v(" "),a("p",[t._v("其他框架也大都能自己加载前端资源，那么方法差不多也是类似的")]),t._v(" "),a("p",[t._v("其实还有种方式：就是gulp等编译工具和框架相结合，这种需要修改源码，这里有篇文章就是描述这个的：http://www.cnblogs.com/shihao905/p/6229644.html")]),t._v(" "),a("h3",{attrs:{id:"使用js手动加载资源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用js手动加载资源","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用js手动加载资源")]),t._v(" "),a("p",[t._v("这种方式有两个分支：")]),t._v(" "),a("h4",{attrs:{id:"（1）：使用js创造-script-标签，然后动态添加到dom中，比如："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#（1）：使用js创造-script-标签，然后动态添加到dom中，比如：","aria-hidden":"true"}},[t._v("#")]),t._v(" （1）：使用js创造<script>标签，然后动态添加到dom中，比如：")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("                 var head = document.getElementsByTagName('head')[0];\n                 var script = document.creatElement('script');\n\n                 script.defer = 'defer';\n                 script.async = false;\n                 script.type = \"text/javascript\";\n                 script.src = 'XX?v=' + version;\n                 head.insertBefore(script, head.firstChild);\n")])])]),a("p",[t._v("这种方式会引起页面重绘，不适合刚进页面时使用，否则会影响页面加载性能")]),t._v(" "),a("h4",{attrs:{id:"_2-使用document-write-如："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用document-write-如：","aria-hidden":"true"}},[t._v("#")]),t._v(" (2):使用document.write,如：")]),t._v(" "),a("p",[a("code",[t._v("document.write('<script type=\"text/javascript\" src=\"XX?v='+ version +'\"><\/script>')")])]),t._v(" "),a("p",[t._v("由于document.write在onload事件之后再使用会直接重写页面，所以这个只能在页面刚进入时使用")])])}),[],!1,null,null,null);s.default=e.exports}}]);